# –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –ü—Ä–æ—Ä–∞–±360 –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π SaaS

## üéØ –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ "–ü—Ä–æ—Ä–∞–±360" –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é SaaS –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.

## üèóÔ∏è –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- **Frontend SPA**: React + TypeScript + Vite
- **–≠–∫—Ä–∞–Ω—ã**: —Å–º–µ—Ç—ã, –ø—Ä–æ–µ–∫—Ç—ã, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, –æ—Ç—á–µ—Ç—ã
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: localStorage —á–µ—Ä–µ–∑ storageService.ts
- **–≠–∫—Å–ø–æ—Ä—Ç PDF**: jsPDF, jspdf-autotable
- **AI**: –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –¥–æ—Å—Ç—É–ø –∫ Gemini —á–µ—Ä–µ–∑ AISuggestModal
- **–î–µ–ø–ª–æ–π**: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–¥ –Ω–∞ Vercel
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Supabase (PostgreSQL + Auth + Storage)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Supabase Auth
- **–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ**: Supabase Storage

### ‚ùå –ß–µ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–ª—è SaaS:
- –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏/–≤–æ—Ä–∫—Å–ø–µ–π—Å—ã)
- –ë–∏–ª–ª–∏–Ω–≥ –∏ –ø–æ–¥–ø–∏—Å–∫–∏
- API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞

---

## üè¢ 1. –ú–£–õ–¨–¢–ò–¢–ï–ù–ê–ù–¢–ù–û–°–¢–¨ (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏/–≤–æ—Ä–∫—Å–ø–µ–π—Å—ã)

### –ß—Ç–æ —ç—Ç–æ:
–°–∏—Å—Ç–µ–º–∞, –≥–¥–µ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π (—Ç–µ–Ω–∞–Ω—Ç–æ–≤).

### ‚úÖ –ß—Ç–æ –£–ñ–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- **–ë–∞–∑–æ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è**: –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ RLS
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Supabase Auth —Å —Å–µ—Å—Å–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `user_id`

### ‚ùå –ß—Ç–æ –ù–ï —Ö–≤–∞—Ç–∞–µ—Ç:
- **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å**: –°–µ–π—á–∞—Å –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = –æ—Ç–¥–µ–ª—å–Ω—ã–π "—Ç–µ–Ω–∞–Ω—Ç"
- **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞**: –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ –≤–Ω—É—Ç—Ä–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- **–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞**: –ù–µ—Ç —Å–∏—Å—Ç–µ–º—ã —Ä–æ–ª–µ–π (–¥–∏—Ä–µ–∫—Ç–æ—Ä, –º–µ–Ω–µ–¥–∂–µ—Ä, —Å–º–µ—Ç—á–∏–∫)
- **–û–±—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã**: –ù–µ—Ç –æ–±—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –ø—Ä–æ–µ–∫—Ç–æ–≤, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ:
- **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞**: –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –æ–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π**: –î–∏—Ä–µ–∫—Ç–æ—Ä –≤–∏–¥–∏—Ç –≤—Å–µ, —Å–º–µ—Ç—á–∏–∫ - —Ç–æ–ª—å–∫–æ —Å–º–µ—Ç—ã
- **–û–±—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã**: –û–±—â–∞—è –±–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- **–ë—Ä–µ–Ω–¥–∏–Ω–≥**: –ö–∞–∂–¥–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–æ—Ç–∏–ø, —Ü–≤–µ—Ç–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –û–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Ç—ã—Å—è—á–∏ –∫–æ–º–ø–∞–Ω–∏–π

### –ü—Ä–∏–º–µ—Ä —Ä–∞–∑–ª–∏—á–∏–π:

**–¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å (–∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ–Ω–∞–Ω—Ç):**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1 (–ò–ü –ò–≤–∞–Ω–æ–≤) ‚Üí –°–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã, —Å–º–µ—Ç—ã, –∫–ª–∏–µ–Ω—Ç—ã
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2 (–ò–ü –ü–µ—Ç—Ä–æ–≤) ‚Üí –°–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã, —Å–º–µ—Ç—ã, –∫–ª–∏–µ–Ω—Ç—ã  
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 3 (–ò–ü –°–∏–¥–æ—Ä–æ–≤) ‚Üí –°–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã, —Å–º–µ—Ç—ã, –∫–ª–∏–µ–Ω—Ç—ã
```

**–ù—É–∂–Ω–∞—è –º–æ–¥–µ–ª—å (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å):**
```
–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è "–°—Ç—Ä–æ–π–ö–æ–º–ø–∞–Ω–∏—è" 
‚îú‚îÄ‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1 (–î–∏—Ä–µ–∫—Ç–æ—Ä) ‚Üí –í–∏–¥–∏—Ç –í–°–ï –ø—Ä–æ–µ–∫—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏
‚îú‚îÄ‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2 (–ú–µ–Ω–µ–¥–∂–µ—Ä) ‚Üí –í–∏–¥–∏—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
‚îú‚îÄ‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 3 (–°–º–µ—Ç—á–∏–∫) ‚Üí –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–º–µ—Ç—ã
‚îî‚îÄ‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 4 (–ë—É—Ö–≥–∞–ª—Ç–µ—Ä) ‚Üí –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–Ω—Å—ã

–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è "–†–µ–º–æ–Ω—Ç–°–µ—Ä–≤–∏—Å"
‚îú‚îÄ‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 5 (–í–ª–∞–¥–µ–ª–µ—Ü) ‚Üí –í–∏–¥–∏—Ç –í–°–ï –ø—Ä–æ–µ–∫—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏
‚îî‚îÄ‚îÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 6 (–ú–∞—Å—Ç–µ—Ä) ‚Üí –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```sql
-- –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
CREATE TABLE organizations (
    id uuid PRIMARY KEY,
    name text NOT NULL,
    logo_url text,
    settings jsonb,
    created_at timestamptz DEFAULT now()
);

-- –ü—Ä–∏–≤—è–∑–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
ALTER TABLE projects ADD COLUMN organization_id uuid REFERENCES organizations(id);
ALTER TABLE estimates ADD COLUMN organization_id uuid REFERENCES organizations(id);
-- –ò —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

-- –û–±–Ω–æ–≤–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏
CREATE POLICY "Users can view org data" ON projects
FOR SELECT USING (
    organization_id IN (
        SELECT organization_id FROM user_organizations 
        WHERE user_id = auth.uid()
    )
);
```

#### –ö–æ–¥:
```typescript
// –ö–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
const OrganizationContext = createContext<{
  currentOrg: Organization | null;
  switchOrg: (orgId: string) => void;
  userOrgs: Organization[];
}>();

// –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤–∫–ª—é—á–∞—é—Ç organization_id
const { data } = await supabase
  .from('projects')
  .select('*')
  .eq('organization_id', currentOrg.id);
```

### –≠—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
1. **–≠—Ç–∞–ø 1**: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã organizations
2. **–≠—Ç–∞–ø 2**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ organization_id –≤–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
3. **–≠—Ç–∞–ø 3**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ RLS –ø–æ–ª–∏—Ç–∏–∫
4. **–≠—Ç–∞–ø 4**: –°–æ–∑–¥–∞–Ω–∏–µ UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏
5. **–≠—Ç–∞–ø 5**: –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üí≥ 2. –ë–ò–õ–õ–ò–ù–ì –ò –ü–û–î–ü–ò–°–ö–ò

### –ß—Ç–æ —ç—Ç–æ:
–°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –¥–ª—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ SaaS.

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ:
- **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è**: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –†–∞–∑–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ—Ö–æ–¥–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫

### –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π:
```typescript
const PLANS = {
  starter: {
    name: "–°—Ç–∞—Ä—Ç–æ–≤—ã–π",
    price: 990, // —Ä—É–±–ª–µ–π/–º–µ—Å—è—Ü
    limits: {
      projects: 5,
      estimates: 20,
      storage: "1GB",
      users: 1,
      features: ["basic_reports", "pdf_export"]
    }
  },
  professional: {
    name: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π", 
    price: 2990,
    limits: {
      projects: 50,
      estimates: 200,
      storage: "10GB", 
      users: 5,
      features: ["advanced_reports", "ai_suggestions", "api_access"]
    }
  },
  enterprise: {
    name: "–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π",
    price: 9990,
    limits: {
      projects: -1, // –±–µ–∑–ª–∏–º–∏—Ç
      estimates: -1,
      storage: "100GB",
      users: -1,
      features: ["all_features", "priority_support", "custom_branding"]
    }
  }
};
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```sql
-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–¥–ø–∏—Å–æ–∫
CREATE TABLE subscriptions (
    id uuid PRIMARY KEY,
    organization_id uuid REFERENCES organizations(id),
    plan_id text NOT NULL,
    status text CHECK (status IN ('active', 'canceled', 'past_due')),
    current_period_start timestamptz,
    current_period_end timestamptz,
    stripe_subscription_id text,
    created_at timestamptz DEFAULT now()
);

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
CREATE OR REPLACE FUNCTION check_project_limit(org_id uuid)
RETURNS boolean AS $$
DECLARE
    current_count integer;
    plan_limit integer;
BEGIN
    SELECT COUNT(*) INTO current_count FROM projects WHERE organization_id = org_id;
    SELECT limits->>'projects' INTO plan_limit FROM subscriptions s
    JOIN plans p ON s.plan_id = p.id 
    WHERE s.organization_id = org_id AND s.status = 'active';
    
    RETURN plan_limit = -1 OR current_count < plan_limit;
END;
$$ LANGUAGE plpgsql;
```

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏:
```typescript
// Stripe –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
import Stripe from 'stripe';

const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);

// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
const subscription = await stripe.subscriptions.create({
  customer: customerId,
  items: [{ price: priceId }],
  metadata: { organizationId: orgId }
});

// Webhook –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π
app.post('/webhook/stripe', (req, res) => {
  const event = req.body;
  
  switch (event.type) {
    case 'invoice.payment_succeeded':
      // –ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
      break;
    case 'invoice.payment_failed':
      // –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø
      break;
  }
});
```

### –≠—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
1. **–≠—Ç–∞–ø 1**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Stripe/YooKassa
2. **–≠—Ç–∞–ø 2**: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ç–∞—Ä–∏—Ñ–æ–≤
3. **–≠—Ç–∞–ø 3**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–æ–≤
4. **–≠—Ç–∞–ø 4**: UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
5. **–≠—Ç–∞–ø 5**: Webhook'–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

## üîå 3. API –î–õ–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–ô

### –ß—Ç–æ —ç—Ç–æ:
REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ:
- **1C –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —É—á–µ—Ç–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- **–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ API**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–ø–∏—Å–æ–∫
- **CRM —Å–∏—Å—Ç–µ–º—ã**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ –±–∞–∑–∞–º–∏
- **–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: –û—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
- **–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### –ü—Ä–∏–º–µ—Ä—ã API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:
```typescript
// REST API —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
app.get('/api/v1/projects', authenticate, (req, res) => {
  // GET /api/v1/projects - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
});

app.post('/api/v1/projects', authenticate, validateProject, (req, res) => {
  // POST /api/v1/projects - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
});

app.get('/api/v1/projects/:id/estimates', authenticate, (req, res) => {
  // GET /api/v1/projects/:id/estimates - —Å–º–µ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
});

app.post('/api/v1/estimates/:id/export/pdf', authenticate, (req, res) => {
  // POST /api/v1/estimates/:id/export/pdf - —ç–∫—Å–ø–æ—Ä—Ç –≤ PDF
});
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è API:
```typescript
// API –∫–ª—é—á–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
CREATE TABLE api_keys (
    id uuid PRIMARY KEY,
    organization_id uuid REFERENCES organizations(id),
    key_hash text NOT NULL,
    name text NOT NULL,
    permissions jsonb, // –∫–∞–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
    last_used_at timestamptz,
    created_at timestamptz DEFAULT now()
);

// Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API –∫–ª—é—á–µ–π
const authenticateApiKey = async (req, res, next) => {
  const apiKey = req.headers['x-api-key'];
  const keyHash = hashApiKey(apiKey);
  
  const key = await supabase
    .from('api_keys')
    .select('organization_id, permissions')
    .eq('key_hash', keyHash)
    .single();
    
  if (!key) return res.status(401).json({ error: 'Invalid API key' });
  
  req.organizationId = key.organization_id;
  req.permissions = key.permissions;
  next();
};
```

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1C:
```typescript
// Webhook –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å 1C
app.post('/webhook/1c/sync', authenticateApiKey, async (req, res) => {
  const { projects, estimates, clients } = req.body;
  
  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤
  for (const project of projects) {
    await supabase
      .from('projects')
      .upsert({
        external_id: project.id, // ID –∏–∑ 1C
        name: project.name,
        client: project.client,
        organization_id: req.organizationId
      });
  }
  
  res.json({ success: true });
});
```

### –≠—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
1. **–≠—Ç–∞–ø 1**: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ REST API
2. **–≠—Ç–∞–ø 2**: –°–∏—Å—Ç–µ–º–∞ API –∫–ª—é—á–µ–π
3. **–≠—Ç–∞–ø 3**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger)
4. **–≠—Ç–∞–ø 4**: Rate limiting –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
5. **–≠—Ç–∞–ø 5**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

---

## üìä 4. –†–ê–°–®–ò–†–ï–ù–ù–ê–Ø –ê–ù–ê–õ–ò–¢–ò–ö–ê

### –ß—Ç–æ —ç—Ç–æ:
–ì–ª—É–±–æ–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π.

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ:
- **–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ü–æ–Ω–∏–º–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å–∞
- **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –í—ã—è–≤–ª–µ–Ω–∏–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
- **–û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å**: –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –¥–ª—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

### –¢–∏–ø—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
```typescript
// –î–∞—à–±–æ—Ä–¥ —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
interface DashboardMetrics {
  // –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  totalRevenue: number;
  totalProfit: number;
  profitMargin: number;
  averageProjectValue: number;
  
  // –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  projectsCompleted: number;
  averageProjectDuration: number;
  clientSatisfaction: number;
  
  // –ü—Ä–æ–≥–Ω–æ–∑—ã
  projectedRevenue: number;
  riskProjects: Project[];
  
  // –¢—Ä–µ–Ω–¥—ã
  revenueGrowth: number;
  projectVolumeGrowth: number;
}

// –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
interface ProjectAnalytics {
  profitability: {
    byProject: ProjectProfitability[];
    byClient: ClientProfitability[];
    byType: ProjectTypeProfitability[];
  };
  
  performance: {
    averageCompletionTime: number;
    budgetAccuracy: number; // –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–Ω–æ —Å–º–µ—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
    resourceUtilization: number;
  };
  
  trends: {
    seasonalPatterns: SeasonalData[];
    marketTrends: MarketData[];
  };
}
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
```sql
-- –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
CREATE MATERIALIZED VIEW project_analytics AS
SELECT 
    p.id,
    p.name,
    p.status,
    SUM(e.grand_total) as total_estimate_value,
    SUM(CASE WHEN fe.type = 'income' THEN fe.amount ELSE 0 END) as total_income,
    SUM(CASE WHEN fe.type = 'expense' THEN fe.amount ELSE 0 END) as total_expenses,
    (SUM(CASE WHEN fe.type = 'income' THEN fe.amount ELSE 0 END) - 
     SUM(CASE WHEN fe.type = 'expense' THEN fe.amount ELSE 0 END)) as profit,
    EXTRACT(EPOCH FROM (p.updated_at - p.created_at))/86400 as duration_days
FROM projects p
LEFT JOIN estimates e ON p.id = e.project_id
LEFT JOIN finance_entries fe ON p.id = fe.project_id
GROUP BY p.id, p.name, p.status, p.created_at, p.updated_at;

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
CREATE OR REPLACE FUNCTION refresh_analytics()
RETURNS void AS $$
BEGIN
    REFRESH MATERIALIZED VIEW project_analytics;
END;
$$ LANGUAGE plpgsql;
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏:
```typescript
// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ PostHog –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
import { PostHog } from 'posthog-node';

const posthog = new PostHog(process.env.POSTHOG_KEY);

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
const trackProjectCreated = (project: Project, userId: string) => {
  posthog.capture({
    distinctId: userId,
    event: 'project_created',
    properties: {
      projectId: project.id,
      projectValue: project.estimatedValue,
      clientType: project.clientType,
      organizationId: project.organizationId
    }
  });
};

// A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
const shouldShowNewFeature = (userId: string) => {
  return posthog.isFeatureEnabled('new-estimate-ui', userId);
};
```

### –≠—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
1. **–≠—Ç–∞–ø 1**: –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥
2. **–≠—Ç–∞–ø 2**: –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
3. **–≠—Ç–∞–ø 3**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PostHog/Amplitude
4. **–≠—Ç–∞–ø 4**: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑—ã
5. **–≠—Ç–∞–ø 5**: A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

---

## üë• 5. –ö–û–ú–ê–ù–î–ù–ê–Ø –†–ê–ë–û–¢–ê

### –ß—Ç–æ —ç—Ç–æ:
–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º —Å —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.

### –ó–∞—á–µ–º –Ω—É–∂–Ω–æ:
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä—É–¥–∞**: –†–∞–∑–Ω—ã–µ —Ä–æ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**: –ö—Ç–æ —á—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- **–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è**: –°–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- **–ê—É–¥–∏—Ç**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫—Ç–æ —á—Ç–æ –¥–µ–ª–∞–ª

### –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π:
```typescript
enum UserRole {
  OWNER = 'owner',           // –í–ª–∞–¥–µ–ª–µ—Ü –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
  ADMIN = 'admin',           // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
  MANAGER = 'manager',       // –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤
  ESTIMATOR = 'estimator',   // –°–º–µ—Ç—á–∏–∫
  WORKER = 'worker',         // –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
  VIEWER = 'viewer'          // –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä
}

interface RolePermissions {
  projects: {
    create: boolean;
    read: boolean;
    update: boolean;
    delete: boolean;
    assign: boolean;
  };
  estimates: {
    create: boolean;
    read: boolean;
    update: boolean;
    delete: boolean;
    approve: boolean;
  };
  finances: {
    read: boolean;
    create: boolean;
    approve: boolean;
  };
  reports: {
    read: boolean;
    export: boolean;
  };
}

const ROLE_PERMISSIONS: Record<UserRole, RolePermissions> = {
  [UserRole.OWNER]: {
    projects: { create: true, read: true, update: true, delete: true, assign: true },
    estimates: { create: true, read: true, update: true, delete: true, approve: true },
    finances: { read: true, create: true, approve: true },
    reports: { read: true, export: true }
  },
  [UserRole.ESTIMATOR]: {
    projects: { create: false, read: true, update: false, delete: false, assign: false },
    estimates: { create: true, read: true, update: true, delete: false, approve: false },
    finances: { read: false, create: false, approve: false },
    reports: { read: true, export: false }
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏
};
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
```sql
-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö
CREATE TABLE user_organizations (
    id uuid PRIMARY KEY,
    user_id uuid REFERENCES auth.users(id),
    organization_id uuid REFERENCES organizations(id),
    role text NOT NULL,
    invited_by uuid REFERENCES auth.users(id),
    invited_at timestamptz DEFAULT now(),
    joined_at timestamptz,
    status text CHECK (status IN ('pending', 'active', 'suspended'))
);

-- –ü—Ä–∏–≤—è–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
CREATE TABLE project_assignments (
    id uuid PRIMARY KEY,
    project_id uuid REFERENCES projects(id),
    user_id uuid REFERENCES auth.users(id),
    role text NOT NULL, -- 'owner', 'manager', 'estimator', 'worker'
    assigned_at timestamptz DEFAULT now(),
    assigned_by uuid REFERENCES auth.users(id)
);

-- –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π
CREATE TABLE audit_log (
    id uuid PRIMARY KEY,
    user_id uuid REFERENCES auth.users(id),
    organization_id uuid REFERENCES organizations(id),
    action text NOT NULL, -- 'created', 'updated', 'deleted'
    entity_type text NOT NULL, -- 'project', 'estimate', 'finance_entry'
    entity_id uuid NOT NULL,
    old_values jsonb,
    new_values jsonb,
    ip_address inet,
    user_agent text,
    created_at timestamptz DEFAULT now()
);
```

### –ö–æ–º–∞–Ω–¥–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```typescript
// –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
interface Notification {
  id: string;
  userId: string;
  type: 'project_assigned' | 'estimate_approved' | 'deadline_approaching';
  title: string;
  message: string;
  data: any;
  read: boolean;
  createdAt: Date;
}

// –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø—Ä–æ–µ–∫—Ç–∞–º
interface ProjectComment {
  id: string;
  projectId: string;
  userId: string;
  content: string;
  mentions: string[]; // —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  createdAt: Date;
  updatedAt: Date;
}

// –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–º–µ—Ç
interface EstimateCollaboration {
  estimateId: string;
  activeUsers: {
    userId: string;
    userName: string;
    cursorPosition: number;
    lastSeen: Date;
  }[];
  changes: {
    userId: string;
    change: any; // –æ–ø–µ—Ä–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
    timestamp: Date;
  }[];
}
```

### Real-time —Ñ—É–Ω–∫—Ü–∏–∏:
```typescript
// WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
import { Server } from 'socket.io';

const io = new Server(server);

io.on('connection', (socket) => {
  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
  socket.on('join-project', (projectId) => {
    socket.join(`project-${projectId}`);
  });
  
  // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
  socket.on('estimate-updated', (data) => {
    socket.to(`project-${data.projectId}`).emit('estimate-changed', data);
  });
});

// –í –∫–ª–∏–µ–Ω—Ç–µ
const socket = io();
socket.emit('join-project', projectId);
socket.on('estimate-changed', (data) => {
  // –û–±–Ω–æ–≤–∏—Ç—å UI
});
```

### –≠—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
1. **–≠—Ç–∞–ø 1**: –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
2. **–≠—Ç–∞–ø 2**: –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **–≠—Ç–∞–ø 3**: –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π
4. **–≠—Ç–∞–ø 4**: –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
5. **–≠—Ç–∞–ø 5**: Real-time –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è

---

## üöÄ –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –§–∞–∑–∞ 1: –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å (4-6 –Ω–µ–¥–µ–ª—å)
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã organizations
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ organization_id –≤–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ RLS –ø–æ–ª–∏—Ç–∏–∫
- [ ] UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –§–∞–∑–∞ 2: –ë–∏–ª–ª–∏–Ω–≥ (3-4 –Ω–µ–¥–µ–ª–∏)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Stripe/YooKassa
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ –∏ –ª–∏–º–∏—Ç–æ–≤
- [ ] UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- [ ] Webhook'–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π

### –§–∞–∑–∞ 3: API (3-4 –Ω–µ–¥–µ–ª–∏)
- [ ] –ë–∞–∑–æ–≤—ã–π REST API
- [ ] –°–∏—Å—Ç–µ–º–∞ API –∫–ª—é—á–µ–π
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- [ ] Rate limiting
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1C

### –§–∞–∑–∞ 4: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (4-5 –Ω–µ–¥–µ–ª—å)
- [ ] –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥
- [ ] –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PostHog
- [ ] –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–∑–∞ 5: –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (5-6 –Ω–µ–¥–µ–ª—å)
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- [ ] –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π
- [ ] –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] Real-time –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏:
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API**: < 200ms
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: > 99.9%
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏**: < 3 —Å–µ–∫—É–Ω–¥—ã
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**: > 80%

### –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏:
- **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–ª–∞—Ç–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏**: > 15%
- **Churn rate**: < 5% –≤ –º–µ—Å—è—Ü
- **ARPU**: > 2000 —Ä—É–±–ª–µ–π/–º–µ—Å—è—Ü
- **NPS**: > 50

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏:
- **DAU/MAU**: > 0.3
- **–í—Ä–µ–º—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**: > 30 –º–∏–Ω—É—Ç/–¥–µ–Ω—å
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: > 10
- **Satisfaction score**: > 4.5/5

---

## üí∞ –§–ò–ù–ê–ù–°–û–í–ê–Ø –ú–û–î–ï–õ–¨

### –ü—Ä–æ–≥–Ω–æ–∑ –¥–æ—Ö–æ–¥–æ–≤ (–≥–æ–¥ 1):
- **–°—Ç–∞—Ä—Ç–æ–≤—ã–π –ø–ª–∞–Ω** (990‚ÇΩ/–º–µ—Å): 100 –∫–ª–∏–µ–Ω—Ç–æ–≤ = 1,188,000‚ÇΩ/–≥–æ–¥
- **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π** (2990‚ÇΩ/–º–µ—Å): 50 –∫–ª–∏–µ–Ω—Ç–æ–≤ = 1,794,000‚ÇΩ/–≥–æ–¥
- **–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π** (9990‚ÇΩ/–º–µ—Å): 10 –∫–ª–∏–µ–Ω—Ç–æ–≤ = 1,198,800‚ÇΩ/–≥–æ–¥

**–û–±—â–∏–π –¥–æ—Ö–æ–¥**: ~4,180,000‚ÇΩ/–≥–æ–¥

### –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: 50,000‚ÇΩ/–º–µ—Å—è—Ü
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: 200,000‚ÇΩ/–º–µ—Å—è—Ü
- **–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥**: 100,000‚ÇΩ/–º–µ—Å—è—Ü
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: 30,000‚ÇΩ/–º–µ—Å—è—Ü

**–û–±—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã**: ~4,560,000‚ÇΩ/–≥–æ–¥

### Break-even: 12-15 –º–µ—Å—è—Ü–µ–≤

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –ü—Ä–æ—Ä–∞–±360 –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π SaaS –ø–æ—Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, –Ω–æ –æ—Ç–∫—Ä–æ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏. –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã —É—Å–ø–µ—Ö–∞:

1. **–ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** - –Ω–µ –ø—ã—Ç–∞—Ç—å—Å—è —Å–¥–µ–ª–∞—Ç—å –≤—Å–µ —Å—Ä–∞–∑—É
2. **–§–æ–∫—É—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö** - –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É–ª—É—á—à–∞—Ç—å UX
3. **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
4. **–ù–∞–¥–µ–∂–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞
5. **–ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ª–∏–¥–µ—Ä–æ–º —Ä—ã–Ω–∫–∞ SaaS —Ä–µ—à–µ–Ω–∏–π –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ç—Ä–∞—Å–ª–∏ –≤ –†–æ—Å—Å–∏–∏.

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: $(date)*
*–í–µ—Ä—Å–∏—è: 1.0*
*–°—Ç–∞—Ç—É—Å: –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è*
