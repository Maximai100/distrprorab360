# Исправление нестабильности мобильной навигации

## Проблема
Нижнее меню навигации и верхний хедер перемещались вверх-вниз при прокрутке и касаниях на мобильных устройствах в PWA версии приложения.

## Решение

### 1. Улучшенные CSS стили

#### Нижняя навигация (.bottom-nav)
- Добавлено принудительное GPU ускорение с `transform: translate3d(0, 0, 0)`
- Установлены фиксированные размеры (`height: 60px !important`)
- Добавлена стабилизация для различных браузеров с `contain: layout style paint`
- Предотвращение влияния viewport изменений с `perspective: 1000px`

#### Верхние заголовки (.estimate-header, .projects-list-header, .project-detail-header)
- Аналогичные стили стабилизации
- Фиксированная минимальная высота `min-height: 64px`
- Улучшенное позиционирование с `position: sticky !important`

#### Глобальный app-header
- Новый класс `.app-header` для универсального использования
- Полная стабилизация с фиксированным позиционированием

### 2. Улучшенный JavaScript код стабилизации

#### Функция applyStabilizationStyles
- Централизованное применение стилей стабилизации
- Поддержка как фиксированных, так и sticky элементов
- Оптимизированное применение с таймером для производительности

#### Расширенные события
- Добавлены события для жестов (`gesturestart`, `gesturechange`, `gestureend`)
- Обработка фокуса и потери фокуса окна
- Периодическая проверка стабильности каждую секунду

### 3. Специальные стили для разных браузеров

#### iOS Safari
```css
@supports (-webkit-touch-callout: none) {
    .bottom-nav {
        -webkit-transform: translate3d(0, 0, 0) !important;
        -webkit-backface-visibility: hidden !important;
    }
}
```

#### Android Chrome
```css
@media screen and (-webkit-min-device-pixel-ratio: 0) {
    .bottom-nav {
        will-change: transform;
        -webkit-perspective: 1000px;
    }
}
```

### 4. Улучшенная работа с viewport

#### HTML мета-теги
- Правильная настройка viewport с `viewport-fit=cover`
- Предотвращение масштабирования с `user-scalable=no`

#### JavaScript viewport handling
- Динамическое вычисление высоты viewport
- Обработка поворота экрана с задержкой
- Установка CSS переменных для safe-area

### 5. Глобальные стили стабилизации

#### HTML и Body
- Предотвращение горизонтального скролла
- Стабилизация с `contain: layout style`
- Отключение выделения текста для UI элементов

#### App Container
- Относительное позиционирование с `z-index: 1`
- GPU ускорение с `transform: translateZ(0)`

## Результат

После применения всех исправлений:
- ✅ Нижнее меню навигации остается зафиксированным внизу экрана
- ✅ Верхние заголовки стабильно позиционируются вверху
- ✅ Отсутствуют "прыжки" при прокрутке и касаниях
- ✅ Корректная работа на iOS Safari и Android Chrome
- ✅ Поддержка safe-area для устройств с вырезами

## Тестирование

Для проверки исправления:
1. Откройте приложение на мобильном устройстве
2. Прокрутите контент вверх-вниз
3. Выполните касания по экрану
4. Поверните устройство
5. Убедитесь, что навигация остается стабильной

## Файлы изменений

- `src/index.css` - основные CSS стили
- `src/App.tsx` - JavaScript логика стабилизации  
- `index.html` - настройки viewport и мета-теги